<!-- <head>
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>> -->
<div class="container-fluid">
  <div class="row p-2">
    <div class="col">
     
      <div class="col d-flex justify-content-between align-items-center">

        <h4 class="page-title">{{title}}</h4>
        <div class="back-icon" style="margin-right: 10px;">
  
          <a href="javascript:void(0);" onclick="history.back();">
  
            <i class="bi bi-arrow-left-circle-fill" style="font-size: 30px;"></i>
  
          </a>
  
        </div>
  
      </div>
    </div>
  </div>
  <div class="row p-2">
    <div class="col">
      <form (ngSubmit)="addTemplate()" #fm="ngForm">
      <div class="p-4 bg-white shadow-dark rounded-2">
        <div class="form-group row">
          <label for="templateName" class="col-sm-2 col-form-label">Template Name <span style="color: red; font-weight: bolder;">*</span></label>
          <div class="col-sm-10">
            <input type="text"
                   class="form-control mw-350"
                   id="Templatename"
                   name="Templatename"
                   placeholder="Template Name"
                   [(ngModel)]="templateForm.Templatename" [disabled]="editMode" 
                   required
                     #TemplatenameInput="ngModel"
                      />
                      <div *ngIf="TemplatenameInput.invalid && (TemplatenameInput.dirty || TemplatenameInput.touched)" class="text-danger">
                        Enter Template Name
                      </div>
          </div>
        </div>
        <div class="form-group row">
          <label for="ucode" class="col-sm-2 col-form-label">Unique Code <span style="color: red; font-weight: bolder;">*</span></label>
          <div class="col-sm-10">
            <input type="text"
                   class="form-control mw-350"
                   id="ucode"
                   name="ucode"
                   placeholder="Enter Prefix"
                   [(ngModel)]="templateForm.Uniquecode"
                   readonly   
                   disabled
                   required
                   #ucodeInput="ngModel"
                   />
                 
          </div>
        </div>
        <div class="form-group row">
          <label for="docType" class="col-sm-2 col-form-label">Document Type <span style="color: red; font-weight: bolder;">*</span></label>
          <div class="col-sm-10">
            <p-dropdown [options]="typesDatasource" [(ngModel)]="selectedtype" placeholder="Select Document Type"
                optionLabel="Documenttypename" id="types" name="types" [autoDisplayFirst]="false" [required]="true" #DocumenttypenameInput="ngModel" >
             </p-dropdown>
             <div *ngIf="DocumenttypenameInput.invalid && (DocumenttypenameInput.dirty || DocumenttypenameInput.touched)" class="text-danger">
              Document Type is required
            </div>
          </div>
        </div>
        <div class="form-group row">
          <label for="templateName" class="col-sm-2 col-form-label">No. Of Pages <span style="color: red; font-weight: bolder;">*</span></label>
          <div class="col-sm-10">
            <input type="text"
                   class="form-control mw-350"
                   id="noofpages"
                   name="noofpages"
                   placeholder="No. of Pages"
                   [(ngModel)]="templateForm.Pages" [disabled]="editMode"   (change)="generatePages()"
                   required
                     #noofpagesInput="ngModel"
                      />
                      <div *ngIf="noofpagesInput.invalid && (noofpagesInput.dirty || noofpagesInput.touched)" class="text-danger">
                        Enter No. Of Pages
                      </div>
          </div>
        </div>
      </div>
      </form>
      
      <div class="p-4 mt-3 bg-white shadow-dark rounded-2"  *ngIf="!isbody">
        <h5 class="page-card-title">Header Template</h5> 
        <div class="template-block">
          <!-- <div class="template-grid"> -->
            <form [formGroup]="form1" id="idh">
              <div formControlName="html1" [ngxSummernote]="config" [(ngModel)]="pages[0].header">
              </div>
            </form> 
          <!-- </div> -->
        </div>
      </div>

      <div class="p-4 mt-3 bg-white shadow-dark rounded-2" *ngIf="!isbody">
        <h5 class="page-card-title">Footer Template</h5>
        <div class="template-block">
          <!-- <div class="template-grid"> -->
            <form [formGroup]="form2" id="idf">
              <div formControlName="html2" [ngxSummernote]="config" [(ngModel)]="pages[0].footer">
              </div>
            </form> 
          <!-- </div> -->
        
          
        </div>
      </div>
      
     

      <div *ngIf="isbody" class="p-4 mt-3 bg-white shadow-dark rounded-2">
        <h5 class="page-card-title">Body Template</h5>
        <div class="template-block">
          <!-- <div class="template-grid"> -->
           
                <form [formGroup]="form" id="bodyid">
                  <div formControlName="html" [ngxSummernote]="config" [(ngModel)]="pages[this.currentPage].text">
                  </div>
                </form>    
        
        <!-- </div> -->
        <div class="form-group row my-4" > 
          <!-- style="margin-left: 29.666667%;" -->
        <div class="col-sm-10 offset-sm-2">
        
          <label for="templateName" class="col-sm-3 col-form-label">Page No. {{currentPage + 1}}/{{templateForm.Pages}}</label>
          <button class="btn btn-primary" (click)="prevPage()">Previous</button>
          <button type="button"
          class="btn btn-outline-secondary mx-2" (click)="nextPage()">Next</button>
        </div>
    
      </div>
      </div>
    </div>
      
      <div class="form-group row my-4">
        <div class="col-sm-10 offset-sm-2">
          <button type="button"
                  class="btn btn-outline-secondary mx-2"
                  (click)="onCancel()">
            Cancel
          </button>
          <button type="submit" class="btn btn-primary" [disabled]="!fm.form.valid || isButtonDisabled"  (click)="addTemplate()">{{editMode?'Update':'Submit'}} </button>
          <button type="button" class="col-xs-1 mx-2  btn btn-success" *ngIf="viewMode && templateForm.Status!='Approved'" (click)="approve()">Approve</button>
          <button type="button" class="col-xs-1 mx-2 offset-sm-1 btn btn-primary" *ngIf="viewMode && templateForm.Status!='Approved'" (click)="reinitiative()">Re-Initiative</button>
          <button type="button" class="col-xs-1 mx-8 offset-sm-1 btn btn-danger" *ngIf="viewMode && templateForm.Status!='Approved'" (click)="reject()">Reject</button>
        </div>
      </div>
      <!-- </form> -->
   
  </div>
</div>

