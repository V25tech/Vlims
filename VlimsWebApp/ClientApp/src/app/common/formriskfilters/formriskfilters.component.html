<section *ngIf="data.length > 0">
  <div class="vm-content p-5" *ngIf="isFormDataVsble">
    <div>
      <section class="vm-grid vm-shadow-lg-blue rounded-lg bg-white">
        <div class="content" [class.p-5]="dangerMessages.length > 0 || warningMessages.length > 0" *ngIf="ISolverMessages != null">
          <div class="alert alert-danger" role="alert" *ngIf="dangerMessages.length > 0">
            <div class="section vam-MB0">
              <ul class="list-group vm-list-decimal">
                <ng-container *ngFor="let msg of dangerMessages">
                  <li class="list-group-item vm-list-decimal-item bg-transparent border-0">
                    {{msg.DisplayText}}
                  </li>
                </ng-container>
              </ul>
            </div>
          </div>
          <div class="alert alert-warning" role="alert" *ngIf="warningMessages.length > 0">
            <div class="section vam-MB0">
              <ul class="list-group vm-list-decimal">
                <ng-container *ngFor="let msg of warningMessages">
                  <li class="list-group-item vm-list-decimal-item bg-transparent border-0">
                    {{msg.DisplayText}}
                  </li>
                </ng-container>
              </ul>
            </div>
          </div>
        </div>
        <div class="content" [class.p-5]="scheduleMsgs.length > 0 || showAssociateValMsg">
          <div class="alert alert-danger" role="alert" *ngIf="scheduleMsgs.length > 0 && !showAssociateValMsg">
            <div class="section vam-MB0">
              <ul class="list-group vm-list-decimal">
                <h2>There are some errors in the page, please correct them to continue</h2>
                <ng-container *ngFor="let msg of scheduleMsgs">
                  <li class="list-group-item vm-list-decimal-item bg-transparent border-0">
                    Please add at least one schedule item in {{msg.FormDataName}} - {{msg.ScheduleName}}
                  </li>
                </ng-container>
              </ul>
            </div>
          </div>
          <div class='alert alert-danger' role='alert' *ngIf="showAssociateValMsg">
            <div class='section vam-MB0'>
              <ul class='list-group vm-list-decimal'>
                <li class="list-group-item vm-list-decimal-item bg-transparent border-0">
                  Please associate
                  {{selectedRiskType.DisplayName}}
                </li>
              </ul>
            </div>
          </div>
        </div>
        <header class="d-flex p-5 vm-separator position-relative vm-border-bottom-for-white-panel">
          <h4 class="vm-primary-heading vm-color-teritary font-weight-bold">
            {{selectedForm.Number}} -
            {{selectedForm.DisplayName}}
          </h4>
        </header>
        <div class="vm-content p-5" *ngIf="RisktypesVisible && !viewMode">
          <div class="form-group row mb-4">
            <label class="col-12 labelBold">Associate</label>
            <div class="vm-column-gutter d-block">
              <kendo-dropdownlist class="vm-width-75p" [(ngModel)]='selectedRiskType'
                                  (valueChange)='riskTypeChange($event)' [data]='riskTypes' textField="DisplayName" valueField="Type"
                                  [defaultItem]='{ DisplayName: "Select", Type: "Select" }'>
              </kendo-dropdownlist>
            </div>
          </div>
          <!--Selected Risktype has single risk-->
          <div class='form-group row' *ngIf="isSnglRiskVisible">
            <div class="col-12">
              <label>Select</label>
            </div>
            <div class="col-12 col-sm-6 py-0">
              <kendo-dropdownlist class="vm-width-75p" [(ngModel)]='selectedRisk' (valueChange)="snglRiskChange()"
                                  [data]='curntRiskTypeRisk' textField="Name" valueField="Name" [defaultItem]='{ Name: "Select" }'>
              </kendo-dropdownlist>
            </div>
          </div>
          <!--Selected Risktype has single risk end-->
          <div class="form-group row mb-0" *ngIf="IsFiltersVisible">
            <label class="col-12 labelBold">Filters</label>
            <div class="vm-column-gutter w-100">
              <div class="row">
                <ng-container *ngFor="let rskType of dynamicRiskFiters">
                  <div class="col-sm-2 mt-3 mt-sm-0">
                    <kendo-dropdownlist class="w-100" name="{{rskType.Type}}" id="{{rskType.Type}}"
                                        [(ngModel)]='rskType.SelectedRisk' [defaultItem]='{ Name: "Select", UId: "Select" }'
                                        (valueChange)='riskChange($event, rskType.Type)' [data]='rskType.Risks' textField="Name"
                                        valueField="UId" [kendoDropDownFilter]="{caseSensitive: false, operator: 'contains'}">
                    </kendo-dropdownlist>
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- Associate Risks -->
      <section class="vm-second-level-bg vm-border-white" id="showProperty" *ngIf="isVisible && !viewMode">
        <!-- <header></header> -->
        <div class="vm-content p-5">
          <div class="row">
            <div class="col-md-5 col-sm-12 col-12">
              <section class="m-sm-3 m-md-3 m-lg-3 m-xl-5 rounded-lg shadow bg-white">
                <header class="d-flex p-5 vm-border-bottom-for-white-panel justify-content-between">
                  <p class="vm-primary-heading text-dark font-weight-bold mb-0">
                    Select {{selectedRiskType.DisplayName}}
                  </p>
                  <a (click)="deSelectAll(false)" class="">Deselect All</a>
                </header>
                <div class="vm-content">

                  <div class="dual-list" style="overflow: auto; width: auto; height: 400px;">
                    <div class="dual-search p-5 vm-border-bottom-for-white-panel">
                      <div class="input-group vm-addon">
                        <input type="text" class="form-control" name="risk" [(ngModel)]='risk' #riskInfo=ngModel
                               placeholder="Search">
                        <div class="input-group-append">
                          <a class="input-group-text text-white table-head-bg-color" id="basic-addon2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                              <path d="M23.706 22.3l-5.77-5.769a10.1 10.1 0 10-1.415 1.415l5.769 5.765a1 1 0 101.416-1.411zm-13.592-4.08a8.1 8.1 0 118.106-8.1 8.111 8.111 0 01-8.106 8.095z"
                                    fill="#ffffff" fill-rule="evenodd"></path>
                            </svg>
                          </a>
                        </div>
                      </div>
                    </div>

                    <ul class="list-group vm-dual-list-scroll">
                      <ng-container *ngFor="let item of curntRiskTypeRisks | filter : risk:'Name';">
                        <li class="list-group-item" (click)="item.isClicked = (!item.isClicked)"
                            [ngClass]="{'active': item.isClicked}">
                          {{item.Name}}
                        </li>
                      </ng-container>
                    </ul>
                  </div>

                </div>

              </section>

            </div>

            <div class="col-sm-2 mt-sm-0 mt-3 vm-dual-list-arrows d-sm-flex flex-sm-column align-items-center justify-content-sm-center">
              <button class="btn btn-primary btn-sm" (click)="moveRight()">
                <img src="assets/img/right-arrow.svg" width="10" alt="next" class="d-sm-inline-flex">
                <span class="d-sm-none d-iline-flex">Add to Selected Property</span>
              </button>
              <button class="btn btn-primary btn-sm d-sm-flex" (click)="moveLeft()">
                <img src="assets/img/left-arrow.svg" width="10" alt="next" class="d-sm-inline-flex">
                <span class="d-sm-none d-iline-flex">Remove From to Selected Property</span>
              </button>
              <button class="btn btn-primary btn-sm" (click)="moveAllRight()">
                <img src="assets/img/right-dual-arrow.svg" width="14" alt="next" class="d-sm-inline-flex">
                <span class="d-sm-none d-iline-flex">Add All to Selected Property</span>
              </button>
              <button class="btn btn-primary btn-sm d-sm-flex shadow" (click)="moveAllLeft()">
                <img src="assets/img/left-dual-arrow.svg" width="14" alt="next" class="d-sm-inline-flex">
                <span class="d-sm-none d-iline-flex">Remove All From Selected Property</span>
              </button>
            </div>

            <div class="col-md-5 col-sm-12 col-12 mt-sm-0 mt-5 ">
              <section class="m-sm-5 rounded-lg shadow bg-white">
                <header class="d-flex p-5 vm-border-bottom-for-white-panel justify-content-between">
                  <p class="vm-primary-heading text-dark font-weight-bold mb-0">
                    Selected
                    {{selectedRiskType.DisplayName}}
                  </p>
                  <a (click)="deSelectAll(true)">Deselect All</a>
                </header>
                <div class="vm-content">
                  <div class="dual-list" style="overflow: auto; width: auto; height: 400px;">
                    <div class="dual-search p-5 vm-border-bottom-for-white-panel">
                      <div class="input-group vm-addon">
                        <input type="text" class="form-control" placeholder="Search" name="selRisk"
                               [(ngModel)]='selRisk' #selRiskInfo=ngModel>
                        <div class="input-group-append">
                          <a class="input-group-text text-white table-head-bg-color" id="basic-addon2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                              <path d="M23.706 22.3l-5.77-5.769a10.1 10.1 0 10-1.415 1.415l5.769 5.765a1 1 0 101.416-1.411zm-13.592-4.08a8.1 8.1 0 118.106-8.1 8.111 8.111 0 01-8.106 8.095z"
                                    fill="#ffffff" fill-rule="evenodd"></path>
                            </svg>
                          </a>
                        </div>
                      </div>
                    </div>
                    <ul class="list-group vm-dual-list-scroll">
                      <ng-container *ngFor="let moveitem of associatedRisks | filter:selRisk:'Name';">
                        <li class="list-group-item" (click)="moveitem.isClicked = (!moveitem.isClicked)"
                            [ngClass]="{'active':moveitem.isClicked}">
                          {{moveitem.Name}}
                        </li>
                      </ng-container>
                    </ul>
                  </div>
                </div>
              </section>

            </div>

            <div class="col-12 mt-sm-0 mt-3 vm-dual-list-arrows d-block d-sm-none ">
              <button class="btn btn-primary btn-sm" (click)="moveAllLeft()">
                <img src="assets/img/left-arrow.svg" width="10" alt="next" class="d-none d-sm-inline-flex">
                <span class="d-sm-none d-iline-flex">Remove From to Selected Property</span>
              </button>
              <button class="btn btn-primary btn-sm" (click)="moveLeft()">
                <img src="assets/img/left-dual-arrow.svg" width="14" alt="next" class=" d-none d-sm-inline-flex">
                <span class="d-sm-none d-iline-flex">Remove All From Selected Property</span>
              </button>
            </div>
          </div>
        </div>
        <div class="footer text-center vm-border-top-for-dark-panel p-5">
          <a class="mr-3" (click)="CancelRiskAssociation()">Cancel</a>
          <button class="btn btn-secondary show-property-add-btn" (click)="getFormData()">Add</button>
        </div>
      </section>
      <!-- Associate Risks End-->
    </div>
    <!-- Associated Risks -->
    <section [ngClass]="(!selectedForm.IsPolicyForm && this.associatedFormData.length > 0) ? 'vm-second-level-bg vm-shadow-lg-blue vm-border-white' : 'vm-grid vm-shadow-lg-blue rounded-lg bg-white mb-5' " id="associatedRisk" *ngIf="isFormDataVsble">
      <div class="vm-content" [ngClass]="{'p-5': !selectedForm.IsPolicyForm && this.associatedFormData.length > 0}">
        <div>
          <section>
            <header [ngClass]="{'py-5 px-0': !selectedForm.IsPolicyForm}" *ngIf="this.associatedFormData.length > 0">
              <div class="row">
                <div class="col-8 col-sm-8" *ngIf="!this.selectedForm.IsPolicyForm">
                  <h2 class="vm-primary-heading text-dark font-weight-bold">Associated Risks</h2>
                </div>
                <div class="col-sm-4 col-12 vm-grid-mark text-right mt-3 mt-md-0 mt-lg-0">
                  <span class="mr-3"
                        *ngIf="this.selectedForm.Type.toLowerCase() != 'mandatory' && this.associatedFormData.length > 1 && !viewMode">
                    <a (click)="deleteAllAssociatedRisks()">
                      <img src="assets/img/delete-icon.svg" width="16"
                           height="16" class="mb-2 mr-2">Delete All
                    </a>
                  </span>
                  <span class="mr-3" *ngIf="this.associatedFormData.length > 1 && showExpandAll">
                    <a (click)="expandAll(true)">
                      <img src="assets/img/expand-all.svg" width="16" height="16"
                           class="mb-2 mr-2">Expand All
                    </a>
                  </span>
                  <span *ngIf="this.associatedFormData.length > 1 && showExpandAll">
                    <a (click)="expandAll(false)">
                      <img src="assets/img/collapse-all.svg" width="16" height="16"
                           class="mb-2 mr-2">Collapse All
                    </a>
                  </span>
                </div>
              </div>
            </header>
            <!-- Associated Form data -->
            <div class="vm-content">
              <form name="formDetailsForm" #formDetailsForm="ngForm" novalidate>
                <ng-container *ngFor="let fdata of associatedFormData; trackBy:identify">
                  <section class="bg-white vm-shadow-lg-blue rounded-lg border-0 mb-5"
                           [class.border-0]="selectedForm.IsPolicyForm"
                           [class.vm-no-additional-details]="!selectedForm.IsPolicyForm && !selectedForm.RequireAdditionalDetails">
                    <header *ngIf="!selectedForm.IsPolicyForm" [ngClass]="{'hide-separator': !fdata.isExpanded}"
                            class="pl-5 vm-separator position-relative vm-border-bottom-for-white-panel vm-separator-show"
                            data-toggle="collapse" data-target="#collapseOne" aria-expanded="true"
                            aria-controls="collapseOne">
                      <div class="row w-100">
                        <div class="col-sm-8 col-12">
                          <h4 (click)="fdata.isExpanded = (!fdata.isExpanded)"
                              [ngClass]="{'collapsed': !fdata.isExpanded}"
                              class="vm-primary-heading vm-color-teritary font-weight-bold collapse_head pl-4 p-5">
                            {{fdata.Name}}
                          </h4>
                        </div>
                        <div class="col-sm-4 col-12 vm-grid-mark pr-0 text-right mt-3 mt-md-0 mt-lg-0 p-5">
                          <span *ngIf="this.selectedForm.Type.toLowerCase() != 'mandatory'  && !viewMode">
                            <a (click)="deleteFormData(fdata);$event.stopPropagation();">
                              <img src="assets/img/delete-icon.svg" width="16" height="16" class="mb-2 mr-2">Delete
                            </a>
                          </span>
                        </div>
                      </div>
                    </header>
                    <div class="vm-content collapse" [ngClass]="{'show': fdata.isExpanded}" id="collapseOne"
                         aria-labelledby="headingOne" data-parent="#accordion">
                      <section>
                        <div class="vm-content p-5">
                          <ng-container *ngFor="let fld of fdata.Fields; trackBy:identify">
                            <div *ngIf="fld.IsVisible" class='form-group row mb-4'
                                 [class.vm-is-invalid]="fld.IsDataInvalid">
                              <label class='col-sm-12 col-md-6 col-lg-6 labelBold'>
                                <span [ngClass]="{'vm-star-required': fld.IsMandatory }">{{fld.DisplayName}}</span>
                              </label>
                              <ng-container [ngSwitch]="fld.Type">
                                <ng-container *ngSwitchCase="'DropDown'">
                                  <div class="vm-column-gutter pr-0" [class.vm-is-invalid]="vs.IsCtrlInvalid(dropdownctrl)">
                                    <kendo-dropdownlist #dropdownctrl="ngModel" id="{{fld.Id}}" [data]="fld.Values"
                                                        name="{{fld.Id}}_{{fld.Name}}" attr.alt="{{fld.DisplayName}}"
                                                        [(ngModel)]="fld.Value" [required]="fld.IsMandatory"
                                                        (valueChange)="fld.OnChangeAction?onCtrlChange(fdata, fld, fdata.UId):''"
                                                        [disabled]="!fld.IsEnabled || viewMode">
                                      <ng-template kendoDropDownListValueTemplate let-dataItem
                                                   *ngIf="fld.Format=='currency'">
                                        <span class="template" *ngIf="dataItem">$</span>{{ dataItem }}
                                      </ng-template>
                                      <ng-template kendoDropDownListItemTemplate let-dataItem
                                                   *ngIf="fld.Format=='currency'">
                                        <span class="template" *ngIf="dataItem">
                                          $
                                        </span> {{ dataItem}}
                                      </ng-template>
                                    </kendo-dropdownlist>
                                    <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(dropdownctrl)">
                                      <span class="vm-validation vm-top-arrow mt-2 p-2">
                                        {{vs.GetErrorMessage(dropdownctrl, {},fld.DisplayName)}}
                                      </span>
                                    </div>
                                  </div>
                                </ng-container>
                                <ng-container *ngSwitchCase="'TextBox'">
                                  <ng-container [ngSwitch]="fld.DataType">
                                    <ng-container *ngSwitchCase="datatypes[datatypes.indexOf(fld.DataType)]!=null ? fld.DataType : '-1'">
                                      <div class="vm-column-gutter pr-0"
                                           [class.vm-is-invalid]="vs.IsCtrlInvalid(integertype)">
                                        <kendo-numerictextbox id="{{fld.Id}}" #integertype="ngModel"
                                                              name="{{fld.Id}}_{{fld.Name}}" attr.alt="{{fld.DisplayName}}"
                                                              (blur)="fld.OnChangeAction?onCtrlChange(fdata,fld, fdata.UId):''"
                                                              [min]="fld.Min ? fld.Min : 0" [max]="fld.Max ? fld.Max : undefined"
                                                              [spinners]="false" [(ngModel)]="fld.Value"
                                                              [format]="getFormat(fld.Format, fld.DataType)" [pattern]='fld.RegexValidation'
                                                              [required]="fld.IsMandatory" [spinners]="false"
                                                              [disabled]="!fld.IsEnabled || viewMode">
                                        </kendo-numerictextbox>
                                        <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(integertype)">
                                          <span class="vm-validation vm-top-arrow mt-2 p-2">
                                            {{vs.GetErrorMessage(integertype, {}, fld.DisplayName)}}
                                          </span>
                                        </div>
                                      </div>
                                    </ng-container>
                                    <ng-container *ngSwitchDefault>
                                      <div class="vm-column-gutter pr-0"
                                           [class.vm-is-invalid]="vs.IsCtrlInvalid(textboxctrl)">
                                        <input id="{{fld.Id}}"
                                               #textboxctrl="ngModel"
                                               name="{{fld.Id}}_{{fld.Name}}"
                                               attr.alt="{{fld.DisplayName}}"
                                               type='text' class='form-control'
                                               (blur)="fld.OnChangeAction?onCtrlChange(fdata,fld, fdata.UId):''"
                                               [(ngModel)]='fld.Value'
                                               [required]="fld.IsMandatory"
                                               [pattern]='fld.RegexValidation'
                                               [maxlength]=' (fld.MaxLength>0) ? fld.MaxLength : " " '
                                               [disabled]="!fld.IsEnabled || viewMode" />
                                        <div class='vm-validation-wrap'
                                             *ngIf="vs.IsCtrlInvalid(textboxctrl)">
                                          <span class="vm-validation vm-top-arrow mt-2 p-2">
                                            {{vs.GetErrorMessage(textboxctrl, {}, fld.DisplayName)}}
                                          </span>
                                        </div>
                                      </div>
                                    </ng-container>
                                  </ng-container>
                                </ng-container>
                                <ng-container *ngSwitchCase="'TextArea'">
                                  <div class="vm-column-gutter pr-0"
                                       [class.vm-is-invalid]="vs.IsCtrlInvalid(textareactrl)">
                                    <textarea id="{{fld.Id}}" type="text"
                                              #textareactrl="ngModel"
                                              name="{{fld.Id}}_{{fld.Name}}"
                                              attr.alt="{{fld.DisplayName}}"
                                              class='form-control'
                                              (blur)="fld.OnChangeAction?onCtrlChange(fdata,fld, fdata.UId):''"
                                              [(ngModel)]='fld.Value'
                                              [required]="fld.IsMandatory"
                                              [pattern]='fld.RegexValidation'
                                              [maxlength]=' (fld.MaxLength>0) ? fld.MaxLength : " " '
                                              [disabled]="!fld.IsEnabled || viewMode" rows="3">
                                                                                </textarea>
                                    <div class='vm-validation-wrap'
                                         *ngIf="vs.IsCtrlInvalid(textareactrl)">
                                      <span class="vm-validation vm-top-arrow mt-2 p-2">
                                        {{vs.GetErrorMessage(textareactrl, {}, fld.DisplayName)}}
                                      </span>
                                    </div>
                                  </div>
                                </ng-container>
                                <ng-container *ngSwitchCase="['DateTime', 'DatePicker'].includes(fld.Type) ? fld.Type : ''">
                                  <div class="vm-column-gutter pr-0"
                                       [class.vm-is-invalid]="vs.IsCtrlInvalid(datepickerctrl)">
                                    <kendo-datepicker id="{{fld.Id}}"
                                                      #datepickerctrl="ngModel"
                                                      name="{{fld.Id}}_{{fld.Name}}"
                                                      attr.alt="{{fld.DisplayName}}"
                                                      [min]="fld.Min ? getDateObj(fld.Min) : '' "
                                                      [max]="fld.Max ? getDateObj(fld.Max) : '' "
                                                      (valueChange)="fld.OnChangeAction?onCtrlChange(fdata,fld, fdata.UId):''"
                                                      [required]="fld.IsMandatory"
                                                      [(ngModel)]="fld.Value"
                                                      [disabled]="!fld.IsEnabled || viewMode">
                                    </kendo-datepicker>
                                    <div class='vm-validation-wrap'
                                         *ngIf="vs.IsCtrlInvalid(datepickerctrl)">
                                      <span class="vm-validation vm-top-arrow mt-2 p-2">
                                        {{vs.GetErrorMessage(datepickerctrl, {}, fld.DisplayName)}}
                                      </span>
                                    </div>
                                  </div>
                                </ng-container>
                                <ng-container *ngSwitchCase="'CheckBox'">
                                  <div class="vm-column-gutter pr-0 ml-3" [class.vm-is-invalid]="vs.IsCtrlInvalid(checkboxctrl)">
                                    <div class="custom-control custom-checkbox">
                                      <input type="checkbox" id="{{fld.Id}}" kendoCheckBox #checkboxctrl="ngModel"
                                             name="{{fld.Id}}_{{fld.Name}}" attr.alt="{{fld.DisplayName}}"
                                             class="form-check-input custom-control-input"
                                             (valueChange)="fld.OnChangeAction?onCtrlChange(fdata,fld, fdata.UId):''"
                                             [(ngModel)]='fld.Value' [required]="fld.IsMandatory"
                                             [disabled]="!fld.IsEnabled || viewMode" />
                                      <label for="{{fld.Id}}" class="form-check-label custom-control-label">
                                      </label>
                                    </div>
                                    <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(checkboxctrl)">
                                      <span class="vm-validation vm-top-arrow mt-2 p-2">
                                        {{vs.GetErrorMessage(checkboxctrl, {}, fld.DisplayName)}}
                                      </span>
                                    </div>
                                  </div>
                                </ng-container>
                                <ng-container *ngSwitchDefault>
                                  <div class="vm-column-gutter pr-0"
                                       [class.vm-is-invalid]="vs.IsCtrlInvalid(default)">
                                    <input id="{{fld.Id}}" #default="ngModel"
                                           name="{{fld.Id}}_{{fld.Name}}" type='text'
                                           attr.alt="{{fld.DisplayName}}"
                                           class='form-control' [(ngModel)]='fld.Value'
                                           (blur)="fld.OnChangeAction?onCtrlChange(fdata,fld, fdata.UId):''"
                                           [required]="fld.IsMandatory"
                                           [pattern]='fld.RegexValidation'
                                           [disabled]="!fld.IsEnabled || viewMode" />
                                    <div class='vm-validation-wrap'
                                         *ngIf="vs.IsCtrlInvalid(default)">
                                      <span class="vm-validation vm-top-arrow mt-2 p-2">
                                        {{vs.GetErrorMessage(default, {}, fld.DisplayName)}}
                                      </span>
                                    </div>
                                  </div>
                                </ng-container>
                              </ng-container>
                              <div kendoTooltip position="right" class="vm-help-icon"
                                   title="{{fld.HelpText}}"
                                   *ngIf="fld.HelpText !='' && fld.HelpText != null ">
                              </div>
                            </div>
                          </ng-container>
                        </div>
                      </section>
                      <!-- Form data coverages -->
                      <section>
                        <header *ngIf="showCoverageHeader(fdata.Coverages)">
                          <h4 class="vm-primary-heading font-weight-bold px-5 pt-5 text-dark">Coverages</h4>
                        </header>
                        <div class="vm-content p-5">
                          <ng-container *ngFor="let cov of fdata.Coverages | orderBy:'SequenceNumber'; trackBy:identify">
                            <div class="form-group row mb-4" *ngIf="cov.IsVisible">
                              <div class="form-check mb-0 ml-3"
                                   [ngClass]="{'vm-help-align': (cov.HelpText != null && cov.HelpText != '') }">
                                <div class="custom-control custom-checkbox">
                                  <input type="checkbox" id="{{cov.Id}}"
                                         [(ngModel)]='cov.IsSelected'
                                         name='{{cov.Name}}'
                                         class="form-check-input custom-control-input"
                                         (change)="cov.IsActionable?onCoverageChange(fdata, cov):''"
                                         [disabled]='cov.IsMandatory || viewMode'>
                                  <label for="{{cov.Id}}"
                                         class="form-check-label custom-control-label pl-2">
                                    {{cov.DisplayName}}
                                  </label>
                                </div>
                                <div kendoTooltip position="right" class="vm-help-icon"
                                     *ngIf="cov.HelpText != null && cov.HelpText != '' "
                                     title="{{cov.HelpText}}"></div>
                              </div>
                            </div>
                            <div *ngIf="cov.IsSelected">
                              <ng-container *ngFor="let covfld of cov.Fields;trackBy:identify">
                                <div class="vm-content" *ngIf="covfld.IsVisible">
                                  <div class='form-group row mb-4' [class.vm-is-invalid]="covfld.IsDataInvalid">
                                    <label class='col-sm-12 col-md-6 col-lg-6 labelBold'>
                                      <span [ngClass]="{'vm-star-required': covfld.IsMandatory }">{{covfld.DisplayName}}</span>
                                    </label>
                                    <ng-container [ngSwitch]="covfld.Type">
                                      <ng-container *ngSwitchCase="'DropDown'">
                                        <div class="vm-column-gutter pr-0"
                                             [class.vm-is-invalid]="vs.IsCtrlInvalid(dropdownctrl)">
                                          <kendo-dropdownlist #dropdownctrl="ngModel"
                                                              id="{{covfld.Id}}"
                                                              [data]="covfld.Values"
                                                              name='{{covfld.Id}}_{{covfld.Name}}'
                                                              attr.alt="{{covfld.DisplayName}}"
                                                              [(ngModel)]='covfld.Value'
                                                              [required]="covfld.IsMandatory"
                                                              (valueChange)="covfld.OnChangeAction?onCtrlChange(cov, covfld, fdata.UId, true):''"
                                                              [disabled]="!covfld.IsEnabled || viewMode">
                                            <ng-template kendoDropDownListValueTemplate let-dataItem
                                                         *ngIf="covfld.Format=='currency'">
                                              <span class="template" *ngIf="dataItem">$</span>{{ dataItem }}
                                            </ng-template>
                                            <ng-template kendoDropDownListItemTemplate let-dataItem
                                                         *ngIf="covfld.Format=='currency'">
                                              <span class="template">
                                                $
                                              </span> {{ dataItem}}
                                            </ng-template>
                                          </kendo-dropdownlist>
                                          <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(dropdownctrl)">
                                            <span class="vm-validation vm-top-arrow mt-2 p-2">
                                              {{vs.GetErrorMessage(dropdownctrl, {}, covfld.DisplayName)}}
                                            </span>
                                          </div>
                                        </div>
                                      </ng-container>
                                      <ng-container *ngSwitchCase="'TextBox'">
                                        <ng-container [ngSwitch]="covfld.DataType">
                                          <ng-container *ngSwitchCase="datatypes[datatypes.indexOf(covfld.DataType)]!=null ? covfld.DataType : '-1'">
                                            <div class="vm-column-gutter pr-0"
                                                 [class.vm-is-invalid]="vs.IsCtrlInvalid(numerictype)">
                                              <kendo-numerictextbox id="{{covfld.Id}}"
                                                                    #numerictype="ngModel"
                                                                    name="{{covfld.Id}}_{{covfld.Name}}"
                                                                    attr.alt="{{covfld.DisplayName}}"
                                                                    (blur)="covfld.OnChangeAction?onCtrlChange(cov, covfld, fdata.UId, true):''"
                                                                    [min]=" covfld.Min ? covfld.Min:0"
                                                                    [max]=" covfld.Max ? covfld.Max : undefined"
                                                                    [spinners]="false"
                                                                    [(ngModel)]="covfld.Value"
                                                                    [format]="getFormat(covfld.Format, covfld.DataType)"
                                                                    [pattern]='covfld.RegexValidation'
                                                                    [required]="covfld.IsMandatory"
                                                                    [disabled]="!covfld.IsEnabled || viewMode">
                                              </kendo-numerictextbox>
                                              <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(numerictype)">
                                                <span class="vm-validation vm-top-arrow mt-2 p-2">
                                                  {{vs.GetErrorMessage(numerictype, {}, covfld.DisplayName)}}
                                                </span>
                                              </div>
                                            </div>
                                          </ng-container>
                                          <ng-container *ngSwitchDefault>
                                            <div class="vm-column-gutter pr-0"
                                                 [class.vm-is-invalid]="vs.IsCtrlInvalid(textboxctrl)">
                                              <input id="{{covfld.Id}}"
                                                     #textboxctrl="ngModel"
                                                     name="{{covfld.Id}}_{{covfld.Name}}"
                                                     type='text'
                                                     attr.alt="{{covfld.DisplayName}}"
                                                     class='form-control'
                                                     (blur)="covfld.OnChangeAction?onCtrlChange(cov, covfld, fdata.UId, true):''"
                                                     [(ngModel)]='covfld.Value'
                                                     [required]="covfld.IsMandatory"
                                                     [pattern]='covfld.RegexValidation'
                                                     [maxlength]=' (covfld.MaxLength>0) ? covfld.MaxLength : " " '
                                                     [disabled]="!covfld.IsEnabled || viewMode" />
                                              <div class='vm-validation-wrap'
                                                   *ngIf="vs.IsCtrlInvalid(textboxctrl)">
                                                <span class="vm-validation vm-top-arrow mt-2 p-2">
                                                  {{vs.GetErrorMessage(textboxctrl, {},covfld.DisplayName)}}
                                                </span>
                                              </div>
                                            </div>
                                          </ng-container>
                                        </ng-container>
                                      </ng-container>
                                      <ng-container *ngSwitchCase="'TextArea'">
                                        <div class="vm-column-gutter pr-0"
                                             [class.vm-is-invalid]="vs.IsCtrlInvalid(textareactrl)">
                                          <textarea id="{{covfld.Id}}"
                                                    #textareactrl="ngModel"
                                                    name="{{covfld.Id}}_{{covfld.Name}}"
                                                    attr.alt="{{covfld.DisplayName}}"
                                                    class='form-control'
                                                    (blur)="covfld.OnChangeAction?onCtrlChange(cov, covfld, fdata.UId, true):''"
                                                    [(ngModel)]='covfld.Value'
                                                    [required]="covfld.IsMandatory"
                                                    [pattern]='covfld.RegexValidation'
                                                    [maxlength]=' (covfld.MaxLength>0) ? covfld.MaxLength : " " '
                                                    [disabled]="!covfld.IsEnabled || viewMode"
                                                    rows="3">
                                                                                                    </textarea>
                                          <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(textareactrl)">
                                            <span class="vm-validation vm-top-arrow mt-2 p-2">
                                              {{vs.GetErrorMessage(textareactrl, {}, covfld.DisplayName)}}
                                            </span>
                                          </div>
                                        </div>
                                      </ng-container>
                                      <ng-container *ngSwitchCase="['DateTime', 'DatePicker'].includes(covfld.Type) ? covfld.Type : ''">
                                        <div class="vm-column-gutter pr-0"
                                             [class.vm-is-invalid]="vs.IsCtrlInvalid(datepickerctrl)">
                                          <kendo-datepicker id="{{covfld.Id}}"
                                                            #datepickerctrl="ngModel"
                                                            name="{{covfld.Id}}_{{covfld.Name}}"
                                                            attr.alt="{{covfld.DisplayName}}"
                                                            [min]="covfld.Min ? getDateObj(covfld.Min) : '' "
                                                            [max]="covfld.Max ? getDateObj(covfld.Max) : '' "
                                                            (valueChange)="covfld.OnChangeAction?onCtrlChange(cov, covfld, fdata.UId, true):''"
                                                            [required]="covfld.IsMandatory"
                                                            [(ngModel)]="covfld.Value"
                                                            [disabled]="!covfld.IsEnabled || viewMode">
                                          </kendo-datepicker>
                                          <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(datepickerctrl)">
                                            <span class="vm-validation vm-top-arrow mt-2 p-2">
                                              {{vs.GetErrorMessage(datepickerctrl, {}, covfld.DisplayName)}}
                                            </span>
                                          </div>
                                        </div>
                                      </ng-container>
                                      <ng-container *ngSwitchCase="'CheckBox'">
                                        <div class="vm-column-gutter pr-0 ml-3"
                                             [class.vm-is-invalid]="vs.IsCtrlInvalid(checkboxctrl)">
                                          <div class="custom-control custom-checkbox">
                                            <input type="checkbox" id="{{covfld.Id}}" kendoCheckBox
                                                   #checkboxctrl="ngModel" name="{{covfld.Id}}_{{covfld.Name}}"
                                                   attr.alt="{{covfld.DisplayName}}"
                                                   class="form-check-input custom-control-input"
                                                   (valueChange)="covfld.OnChangeAction?onCtrlChange(cov, covfld, fdata.UId, true):''"
                                                   [(ngModel)]='covfld.Value' [required]="covfld.IsMandatory"
                                                   [disabled]="!covfld.IsEnabled || viewMode" />
                                            <label for="{{covfld.Id}}" class="form-check-label custom-control-label">
                                            </label>
                                          </div>
                                          <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(checkboxctrl)">
                                            <span class="vm-validation vm-top-arrow mt-2 p-2">
                                              {{vs.GetErrorMessage(checkboxctrl, {}, covfld.DisplayName)}}
                                            </span>
                                          </div>
                                        </div>
                                      </ng-container>
                                      <ng-container *ngSwitchDefault>
                                        <div class="vm-column-gutter pr-0"
                                             [class.vm-is-invalid]="vs.IsCtrlInvalid(default)">
                                          <input id="{{covfld.Id}}"
                                                 #default="ngModel"
                                                 name="{{covfld.Id}}_{{covfld.Name}}"
                                                 attr.alt="{{covfld.DisplayName}}"
                                                 type='text'
                                                 class='form-control'
                                                 [(ngModel)]='covfld.Value'
                                                 (blur)="covfld.OnChangeAction?onCtrlChange(cov, covfld, fdata.UId, true):''"
                                                 [required]="covfld.IsMandatory"
                                                 [pattern]='covfld.RegexValidation'
                                                 [disabled]="!covfld.IsEnabled || viewMode" />
                                          <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(default)">
                                            <span class="vm-validation vm-top-arrow mt-2 p-2">
                                              {{vs.GetErrorMessage(default, {}, covfld.DisplayName)}}
                                            </span>
                                          </div>
                                        </div>
                                      </ng-container>
                                    </ng-container>
                                    <div kendoTooltip position="right" class="vm-help-icon"
                                         title="{{covfld.HelpText}}"
                                         *ngIf="covfld.HelpText !='' && covfld.HelpText != null ">
                                    </div>
                                  </div>
                                </div>
                              </ng-container>
                            </div>
                          </ng-container>
                        </div>
                      </section>
                      <!-- Form data coverages end -->
                      <!-- Schedules -->
                      <section>
                        <ng-container [ngTemplateOutlet]='schedule_grid_template' *ngIf="fdata.Schedules != null"
                                      [ngTemplateOutletContext]="{risk: fdata}">
                        </ng-container>
                      </section>
                      <!-- Schedules end -->
                    </div>
                  </section>
                </ng-container>
              </form>
            </div>
            <!-- Associated Form data end -->
          </section>
        </div>
      </div>
    </section>
    <!-- Associated Risks End-->
  </div>
  <footer class="vm-primary-footer container-fluid" *ngIf="isFormDataVsble">
    <div class="row p-5 bg-white clearfix">
      <div class="col-md-12">
        <a (click)='Cancel()' class="mt-3 float-left">Cancel</a>
        <button type="button" class="btn btn-primary float-right" value="Submit" (click)="Submit(false)"
                *ngIf="!(!selectedForm.IsPolicyForm && !selectedForm.RequireAdditionalDetails && this.selectedForm.Type.toLowerCase() == 'mandatory') && !viewMode"
                [disabled]="associatedFormData.length == 0 && this.deletedFormData.length == 0">
          Submit
        </button>
        <button class="btn btn-primary float-right mr-3" value="Save" [disabled]="associatedFormData.length == 0"
                *ngIf="selectedForm.PremiumBearing.toLowerCase() == 'no' && !selectedForm.IsSubmit"
                (click)="Submit(true)">Save
        </button>
      </div>
    </div>
  </footer>
</section>



<!--Schedule grid template-->
<ng-template #schedule_grid_template let-rsk='risk'>
  <ng-container *ngFor="let schd of rsk.Schedules">
    <header class="vm-separator position-relative vm-border-bottom-for-white-panel py-5 mt-5">
      <div class="row">
        <div class="col-8 col-sm-8">
          <h4 class="vm-primary-heading font-weight-bold px-5 text-dark">{{schd.DisplayName}}</h4>
        </div>
        <div class="col-4 col-sm-4 vm-grid-mark" *ngIf="!viewMode">
          <span class="p-0 m-0 float-left float-sm-right mr-5 mt-sm-0">
            <a id="{{schd.Id}}" (click)='addScheduleItem(schd, rsk)'>
              <img src="assets/img/add-button-inside-black-circle.svg" width="16" height="16" class="mb-2 mr-2"
                   alt="addscheduleitem">Add Schedule Item
            </a>
          </span>
        </div>
      </div>
    </header>
    <div class="vm-content">
      <div class="table-responsive">
        <kendo-grid id="{{schd.Id}}" [data]="schd.ScheduleItems" style="width: 100%"
                    class="table vm-table-bdr-separator border-top-0">
          <kendo-grid-column title="SI.No" [sortable]="false" [filterable]="false">
            <ng-template kendoGridCellTemplate let-rowIndex='rowIndex'>
              {{rowIndex + 1}}
            </ng-template>
          </kendo-grid-column>
          <kendo-grid-column [hidden]="hiddenColumns.indexOf(column.Field) > -1"
                             *ngFor="let column of schd.ScheduleFields" field="{{column.Field}}" title="{{column.Title}}">
          </kendo-grid-column>
          <kendo-grid-column title="Actions" [sortable]="false" [filterable]="false">
            <ng-template kendoGridCellTemplate let-dataItem>
              <a (click)='editScheduleItem(dataItem, schd.Id, rsk.FormId)' *ngIf="!viewMode" class="pt-2 mr-2">
                <img src="assets/img/pencil-icon.svg" width="16" height="16" alt="edit">
              </a>
              <a class="ml-1" (click)='deleteScheduleItem(dataItem, schd.Id)' *ngIf="!viewMode" class="pt-2">
                <img src="assets/img/delete-icon.svg" width="16" height="16" alt="delete">
              </a>
              <a class="ml-1" (click)='editScheduleItem(dataItem, schd.Id, rsk.FormId)' *ngIf="viewMode" class="pt-2">
                <svg version="1.1" width="16" height="16" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                     xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 461.312 461.312"
                     style="enable-background:new 0 0 461.312 461.312;" xml:space="preserve" fill="#00a1c9">
                <g>
                <g>
                <path d="M230.656,156.416c-40.96,0-74.24,33.28-74.24,74.24s33.28,74.24,74.24,74.24s74.24-33.28,74.24-74.24
            S271.616,156.416,230.656,156.416z M225.024,208.64c-9.216,0-16.896,7.68-16.896,16.896h-24.576
            c0.512-23.04,18.944-41.472,41.472-41.472V208.64z" />

                    </g>
                  </g>
                <g>
                <g>
                <path d="M455.936,215.296c-25.088-31.232-114.688-133.12-225.28-133.12S30.464,184.064,5.376,215.296
            c-7.168,8.704-7.168,21.504,0,30.72c25.088,31.232,114.688,133.12,225.28,133.12s200.192-101.888,225.28-133.12
            C463.104,237.312,463.104,224.512,455.936,215.296z M230.656,338.176c-59.392,0-107.52-48.128-107.52-107.52
            s48.128-107.52,107.52-107.52s107.52,48.128,107.52,107.52S290.048,338.176,230.656,338.176z" />
                                   
                    </g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                <g>
                  </g>
                </svg>
              </a>
            </ng-template>
          </kendo-grid-column>
        </kendo-grid>
      </div>
    </div>
  </ng-container>
</ng-template>
<!--Schedule grid template end-->
<!-- Add Schedule Item and edit schedule item-->
<div class='vm-content' *ngIf="isSchContentVsble || isEditSchContentVsble">
  <form name="schForm" #schForm="ngForm" novalidate>
    <section>
      <div class="vm-content p-5">
        <section class="vm-grid vm-shadow-lg-blue rounded-lg bg-white mb-5">
          <div class="content" *ngIf="schRulesMessages != null" [class.p-5]="schDangerMessages.length > 0 || schWarningMessages.length > 0">
            <div class="alert alert-danger" *ngIf="schDangerMessages.length > 0">
              <div class="section vam-MB0">
                <ul class="list-group vm-list-decimal">
                  <ng-container *ngFor="let msg of schDangerMessages">
                    <li class="list-group-item vm-list-decimal-item bg-transparent border-0">
                      {{msg.DisplayText}}
                    </li>
                  </ng-container>
                </ul>
              </div>
            </div>
            <div class="alert alert-warning" *ngIf="schWarningMessages.length > 0">
              <div class="section vam-MB0">
                <ul class="list-group vm-list-decimal">
                  <ng-container *ngFor="let msg of schWarningMessages">
                    <li class="list-group-item vm-list-decimal-item bg-transparent border-0">
                      {{msg.DisplayText}}
                    </li>
                  </ng-container>
                </ul>
              </div>
            </div>
          </div>
          <header class="d-flex p-5 vm-separator position-relative vm-border-bottom-for-white-panel">
            <h4 class="vm-primary-heading vm-color-teritary font-weight-bold">{{curntSchName}}</h4>
          </header>
          <!-- Schedule Fields Start-->
          <div class="vm-content p-5">
            <ng-container *ngFor="let schFld of schObj.Fields; trackBy:identify">
              <div class='form-group row mb-4' *ngIf="schFld.IsVisible" [class.vm-is-invalid]="schFld.IsDataInvalid">
                <label class='col-sm-12 col-md-6 col-lg-6 labelBold'>
                  <span [ngClass]="{'vm-star-required': schFld.IsMandatory }">{{schFld.DisplayName}}</span>
                </label>
                <ng-container [ngSwitch]="schFld.Type">
                  <ng-container *ngSwitchCase="'DropDown'">
                    <div class="vm-column-gutter pr-0" [class.vm-is-invalid]="vs.IsCtrlInvalid(dropdownctrl)">
                      <kendo-dropdownlist #dropdownctrl="ngModel" id="{{schFld.Id}}"
                                          [data]="schFld.Values"
                                          name='{{schFld.Id}}_{{schFld.Name}}'
                                          attr.alt="{{schFld.DisplayName}}"
                                          [(ngModel)]='schFld.Value'
                                          [required]="schFld.IsMandatory"
                                          (valueChange)="schFld.OnChangeAction?onSchCtrlChange(schFld):''"
                                          [disabled]="!schFld.IsEnabled || viewMode">
                        <ng-template kendoDropDownListValueTemplate let-dataItem *ngIf="schFld.Format=='currency'">
                          <span class="template" *ngIf="dataItem">$</span>{{ dataItem }}
                        </ng-template>
                        <ng-template kendoDropDownListItemTemplate let-dataItem *ngIf="schFld.Format=='currency'">
                          <span class="template">
                            $
                          </span> {{ dataItem}}
                        </ng-template>
                      </kendo-dropdownlist>
                      <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(dropdownctrl)">
                        <span class="vm-validation vm-top-arrow mt-2 p-2">
                          {{vs.GetErrorMessage(dropdownctrl, {}, schFld.DisplayName)}}
                        </span>
                      </div>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'TextBox'">
                    <ng-container [ngSwitch]="schFld.DataType">
                      <ng-container *ngSwitchCase="datatypes[datatypes.indexOf(schFld.DataType)]!=null ? schFld.DataType : '-1'">
                        <div class="vm-column-gutter pr-0" [class.vm-is-invalid]="vs.IsCtrlInvalid(integertype)">
                          <kendo-numerictextbox id="{{schFld.Id}}" #integertype="ngModel"
                                                name="{{schFld.Id}}_{{schFld.Name}}"
                                                attr.alt="{{schFld.DisplayName}}"
                                                (blur)="schFld.OnChangeAction?onSchCtrlChange(schFld):''"
                                                [min]=" schFld.Min ? schFld.Min:0"
                                                [max]=" schFld.Max ? schFld.Max : undefined"
                                                [spinners]="false"
                                                [(ngModel)]="schFld.Value"
                                                [format]="getFormat(schFld.Format, schFld.DataType)"
                                                [pattern]='schFld.RegexValidation'
                                                [required]="schFld.IsMandatory" [disabled]="!schFld.IsEnabled || viewMode">
                          </kendo-numerictextbox>
                          <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(integertype)">
                            <span class="vm-validation vm-top-arrow mt-2 p-2">
                              {{vs.GetErrorMessage(integertype, {}, schFld.DisplayName)}}
                            </span>
                          </div>
                        </div>
                      </ng-container>
                      <ng-container *ngSwitchDefault>
                        <div class="vm-column-gutter pr-0" [class.vm-is-invalid]="vs.IsCtrlInvalid(textboxctrl)">
                          <input id="{{schFld.Id}}" #textboxctrl="ngModel"
                                 name="{{schFld.Id}}_{{schFld.Name}}"
                                 type='text'
                                 attr.alt="{{schFld.DisplayName}}"
                                 class='form-control'
                                 (blur)="schFld.OnChangeAction?onSchCtrlChange(schFld):''"
                                 [(ngModel)]='schFld.Value'
                                 [required]="schFld.IsMandatory"
                                 [pattern]='schFld.RegexValidation'
                                 [maxlength]=' (schFld.MaxLength>0) ? schFld.MaxLength : " " '
                                 [disabled]="!schFld.IsEnabled || viewMode" />
                          <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(textboxctrl)">
                            <span class="vm-validation vm-top-arrow mt-2 p-2">
                              {{vs.GetErrorMessage(textboxctrl, {}, schFld.DisplayName)}}
                            </span>
                          </div>
                        </div>
                      </ng-container>
                    </ng-container>
                  </ng-container>
                  <ng-container *ngSwitchCase="'TextArea'">
                    <div class="vm-column-gutter pr-0" [class.vm-is-invalid]="vs.IsCtrlInvalid(textareactrl)">
                      <textarea id="{{schFld.Id}}" #textareactrl="ngModel"
                                name="{{schFld.Id}}_{{schFld.Name}}"
                                class='form-control'
                                attr.alt="{{schFld.DisplayName}}"
                                (blur)="schFld.OnChangeAction?onSchCtrlChange(schFld):''"
                                [(ngModel)]='schFld.Value'
                                [required]="schFld.IsMandatory"
                                [maxlength]=' (schFld.MaxLength>0) ? schFld.MaxLength : " " '
                                [pattern]='schFld.RegexValidation' [disabled]="!schFld.IsEnabled || viewMode" rows="3">
                                                 </textarea>
                      <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(textareactrl)">
                        <span class="vm-validation vm-top-arrow mt-2 p-2">
                          {{vs.GetErrorMessage(textareactrl, {}, schFld.DisplayName)}}
                        </span>
                      </div>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="['DateTime', 'DatePicker'].includes(schFld.Type) ? schFld.Type : ''">
                    <div class="vm-column-gutter pr-0" [class.vm-is-invalid]="vs.IsCtrlInvalid(datepickerctrl)">
                      <kendo-datepicker id="{{schFld.Id}}" #datepickerctrl="ngModel"
                                        name="{{schFld.Id}}_{{schFld.Name}}"
                                        attr.alt="{{schFld.DisplayName}}"
                                        [min]=" schFld.Min ? getDateObj(schFld.Min) : '' "
                                        [max]=" schFld.Max ? getDateObj(schFld.Max) : '' "
                                        (valueChange)="schFld.OnChangeAction?onSchCtrlChange(schFld):''"
                                        [required]="schFld.IsMandatory"
                                        [(ngModel)]="schFld.Value"
                                        [disabled]="!schFld.IsEnabled || viewMode">
                      </kendo-datepicker>
                      <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(datepickerctrl)">
                        <span class="vm-validation vm-top-arrow mt-2 p-2">
                          {{vs.GetErrorMessage(datepickerctrl, {}, schFld.DisplayName)}}
                        </span>
                      </div>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchCase="'CheckBox'">
                    <div class="vm-column-gutter pr-0 ml-3" [class.vm-is-invalid]="vs.IsCtrlInvalid(checkboxctrl)">
                      <div class="custom-control custom-checkbox">
                        <input type="checkbox" id="{{schFld.Id}}" kendoCheckBox #checkboxctrl="ngModel"
                               name="{{schFld.Id}}_{{schFld.Name}}" attr.alt="{{schFld.DisplayName}}"
                               class="form-check-input custom-control-input"
                               (valueChange)="schFld.OnChangeAction?onSchCtrlChange(schFld):''" [(ngModel)]='schFld.Value'
                               [required]="schFld.IsMandatory" [disabled]="!schFld.IsEnabled || viewMode" />
                        <label for="{{schFld.Id}}" class="form-check-label custom-control-label">
                        </label>
                      </div>
                      <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(checkboxctrl)">
                        <span class="vm-validation vm-top-arrow mt-2 p-2">
                          {{vs.GetErrorMessage(checkboxctrl, {}, schFld.DisplayName)}}
                        </span>
                      </div>
                    </div>
                  </ng-container>
                  <ng-container *ngSwitchDefault>
                    <div class="vm-column-gutter pr-0" [class.vm-is-invalid]="vs.IsCtrlInvalid(default)">
                      <input id="{{schFld.Id}}" #default="ngModel"
                             name="{{schFld.Id}}_{{schFld.Name}}" type='text'
                             class='form-control' attr.alt="{{schFld.DisplayName}}"
                             [(ngModel)]='schFld.Value'
                             (blur)="schFld.OnChangeAction?onSchCtrlChange(schFld):''"
                             [required]="schFld.IsMandatory"
                             [pattern]='schFld.RegexValidation'
                             [disabled]="!schFld.IsEnabled || viewMode" />
                      <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(default)">
                        <span class="vm-validation vm-top-arrow mt-2 p-2">
                          {{vs.GetErrorMessage(default, {}, schFld.DisplayName)}}
                        </span>
                      </div>
                    </div>
                  </ng-container>
                </ng-container>
                <div kendoTooltip position="right" class="vm-help-icon" title="{{schFld.HelpText}}"
                     *ngIf="schFld.HelpText !='' && schFld.HelpText != null ">
                </div>
              </div>
            </ng-container>
          </div>
          <!-- Schedule Data Fields End-->
          <!--Schedule Coverages Start-->
          <section *ngIf="schObj.ScheduleCoverages != null">
            <header *ngIf="showCoverageHeader(schObj.ScheduleCoverages)">
              <h4 class="vm-primary-heading font-weight-bold px-5 pt-5 text-dark">Coverages</h4>
            </header>
            <div class="vm-content p-5">
              <ng-container *ngFor="let schcov of schObj.ScheduleCoverages | orderBy:'SequenceNumber'; trackBy:identify">
                <div class="form-group row mb-4" *ngIf="schcov.IsVisible">
                  <div class="form-check mb-0 ml-3"
                       [ngClass]="{'vm-help-align': (schcov.HelpText != null && schcov.HelpText != '') }">
                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" id="{{schcov.Id}}" [(ngModel)]='schcov.IsSelected' name='{{schcov.Name}}'
                             class="form-check-input custom-control-input"
                             (change)="schcov.IsActionable?onScheduleCoverageChange(schcov):''"
                             [disabled]='schcov.IsMandatory || viewMode'>
                      <label for="{{schcov.Id}}" class="form-check-label custom-control-label pl-2">
                        {{schcov.DisplayName}}
                      </label>
                    </div>
                    <div kendoTooltip position="right" class="vm-help-icon" title="{{schcov.HelpText}}"
                         *ngIf="schcov.HelpText != null && schcov.HelpText != '' ">
                    </div>
                  </div>
                </div>
                <div *ngIf="schcov.IsSelected">
                  <ng-container *ngFor="let covfld of schcov.Fields; trackBy:identify">
                    <div class="vm-content" *ngIf="covfld.IsVisible">
                      <div class='form-group row' [class.vm-is-invalid]="covfld.IsDataInvalid">
                        <label class='col-sm-6 col-form-label'>
                          <span [ngClass]="{'vm-star-required': covfld.IsMandatory }">{{covfld.DisplayName}}</span>
                        </label>
                        <ng-container [ngSwitch]="covfld.Type">
                          <ng-container *ngSwitchCase="'DropDown'">
                            <div class="vm-column-gutter pr-0" [class.vm-is-invalid]="vs.IsCtrlInvalid(dropdownctrl)">
                              <kendo-dropdownlist #dropdownctrl="ngModel" id="{{covfld.Id}}" [data]="covfld.Values"
                                                  name='{{covfld.Id}}_{{covfld.Name}}' attr.alt="{{covfld.DisplayName}}"
                                                  [(ngModel)]='covfld.Value' [required]="covfld.IsMandatory"
                                                  (valueChange)="covfld.OnChangeAction?onSchCtrlChange(covfld):''"
                                                  [disabled]="!covfld.IsEnabled || viewMode">
                                <ng-template kendoDropDownListValueTemplate let-dataItem *ngIf="covfld.Format=='currency'">
                                  <span class="template" *ngIf="dataItem">$</span>{{ dataItem }}
                                </ng-template>
                                <ng-template kendoDropDownListItemTemplate let-dataItem *ngIf="covfld.Format=='currency'">
                                  <span class="template">
                                    $
                                  </span> {{ dataItem}}
                                </ng-template>
                              </kendo-dropdownlist>
                              <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(dropdownctrl)">
                                <span class="vm-validation vm-top-arrow mt-2 p-2">
                                  {{vs.GetErrorMessage(dropdownctrl, {}, covfld.DisplayName)}}
                                </span>
                              </div>
                            </div>
                          </ng-container>
                          <ng-container *ngSwitchCase="'TextBox'">
                            <ng-container [ngSwitch]="covfld.DataType">
                              <ng-container *ngSwitchCase="datatypes[datatypes.indexOf(covfld.DataType)]!=null ? covfld.DataType : '-1'">
                                <div class="vm-column-gutter pr-0" [class.vm-is-invalid]="vs.IsCtrlInvalid(integertype)">
                                  <kendo-numerictextbox id="{{covfld.Id}}"
                                                        #integertype="ngModel"
                                                        name="{{covfld.Id}}_{{covfld.Name}}"
                                                        attr.alt="{{covfld.DisplayName}}"
                                                        (blur)="covfld.OnChangeAction?onSchCtrlChange(covfld):''"
                                                        [min]=" covfld.Min ? covfld.Min:0"
                                                        [max]=" covfld.Max ? covfld.Max : undefined"
                                                        [spinners]="false"
                                                        [(ngModel)]="covfld.Value"
                                                        [format]="getFormat(covfld.Format, covfld.DataType)"
                                                        [pattern]='covfld.RegexValidation'
                                                        [required]="covfld.IsMandatory"
                                                        [disabled]="!covfld.IsEnabled || viewMode">
                                  </kendo-numerictextbox>
                                  <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(integertype)">
                                    <span class="vm-validation vm-top-arrow mt-2 p-2">
                                      {{vs.GetErrorMessage(integertype, {}, covfld.DisplayName)}}
                                    </span>
                                  </div>
                                </div>
                              </ng-container>
                              <ng-container *ngSwitchDefault>
                                <div class="vm-column-gutter pr-0" [class.vm-is-invalid]="vs.IsCtrlInvalid(textboxctrl)">
                                  <input id="{{covfld.Id}}" #textboxctrl="ngModel"
                                         name="{{covfld.Id}}_{{covfld.Name}}"
                                         type='text'
                                         attr.alt="{{covfld.DisplayName}}"
                                         class='form-control'
                                         (blur)="covfld.OnChangeAction?onSchCtrlChange(covfld):''"
                                         [(ngModel)]='covfld.Value'
                                         [required]="covfld.IsMandatory"
                                         [pattern]='covfld.RegexValidation'
                                         [maxlength]=' (covfld.MaxLength>0) ? covfld.MaxLength : " " '
                                         [disabled]="!covfld.IsEnabled || viewMode" />
                                  <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(textboxctrl)">
                                    <span class="vm-validation vm-top-arrow mt-2 p-2">
                                      {{vs.GetErrorMessage(textboxctrl, {}, covfld.DisplayName)}}
                                    </span>
                                  </div>
                                </div>
                              </ng-container>
                            </ng-container>
                          </ng-container>
                          <ng-container *ngSwitchCase="'TextArea'">
                            <div class="vm-column-gutter pr-0" [class.vm-is-invalid]="vs.IsCtrlInvalid(textareactrl)">
                              <textarea id="{{covfld.Id}}" #textareactrl="ngModel"
                                        name="{{covfld.Id}}_{{covfld.Name}}"
                                        attr.alt="{{covfld.DisplayName}}"
                                        class='form-control'
                                        (blur)="covfld.OnChangeAction?onSchCtrlChange(covfld):''"
                                        [(ngModel)]='covfld.Value'
                                        [required]="covfld.IsMandatory"
                                        [pattern]='covfld.RegexValidation'
                                        [maxlength]=' (covfld.MaxLength>0) ? covfld.MaxLength : " " '
                                        [disabled]="!covfld.IsEnabled || viewMode" rows="3">
                                                                        </textarea>
                              <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(textareactrl)">
                                <span class="vm-validation vm-top-arrow mt-2 p-2">
                                  {{vs.GetErrorMessage(textareactrl, {}, covfld.DisplayName)}}
                                </span>
                              </div>
                            </div>
                          </ng-container>
                          <ng-container *ngSwitchCase="['DateTime', 'DatePicker'].includes(covfld.Type) ? covfld.Type : ''">
                            <div class="vm-column-gutter pr-0" [class.vm-is-invalid]="vs.IsCtrlInvalid(datepickerctrl)">
                              <kendo-datepicker id="{{covfld.Id}}"
                                                #datepickerctrl="ngModel"
                                                name="{{covfld.Id}}_{{covfld.Name}}"
                                                attr.alt="{{covfld.DisplayName}}"
                                                [min]=" covfld.Min ? getDateObj(covfld.Min) : '' "
                                                [max]=" covfld.Max ? getDateObj(covfld.Max) : '' "
                                                (valueChange)="covfld.OnChangeAction?onSchCtrlChange(covfld):''"
                                                [required]="covfld.IsMandatory"
                                                [(ngModel)]="covfld.Value"
                                                [disabled]="!covfld.IsEnabled || viewMode">
                              </kendo-datepicker>
                              <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(datepickerctrl)">
                                <span class="vm-validation vm-top-arrow mt-2 p-2">
                                  {{vs.GetErrorMessage(datepickerctrl, {}, covfld.DisplayName)}}
                                </span>
                              </div>
                            </div>
                          </ng-container>
                          <ng-container *ngSwitchCase="'CheckBox'">
                            <div class="vm-column-gutter pr-0 ml-3" [class.vm-is-invalid]="vs.IsCtrlInvalid(checkboxctrl)">
                              <div class="custom-control custom-checkbox">
                                <input type="checkbox" id="{{covfld.Id}}" kendoCheckBox #checkboxctrl="ngModel"
                                       name="{{covfld.Id}}_{{covfld.Name}}" attr.alt="{{covfld.DisplayName}}"
                                       class="form-check-input custom-control-input"
                                       (valueChange)="covfld.OnChangeAction?onSchCtrlChange(covfld):''"
                                       [(ngModel)]='covfld.Value' [required]="covfld.IsMandatory"
                                       [disabled]="!covfld.IsEnabled || viewMode" />
                                <label for="{{covfld.Id}}" class="form-check-label custom-control-label">
                                </label>
                              </div>
                              <div class='vm-validation-wrap' *ngIf="vs.IsCtrlInvalid(checkboxctrl)">
                                <span class="vm-validation vm-top-arrow mt-2 p-2">
                                  {{vs.GetErrorMessage(checkboxctrl, {}, covfld.DisplayName)}}
                                </span>
                              </div>
                            </div>
                          </ng-container>
                          <ng-container *ngSwitchDefault>
                            <div class="vm-column-gutter pr-0" [class.vm-is-invalid]="vs.IsCtrlInvalid(default)">
                              <input id="{{covfld.Id}}" #default="ngModel"
                                     name="{{covfld.Id}}_{{covfld.Name}}" type='text'
                                     attr.alt="{{covfld.DisplayName}}"
                                     class='form-control' [(ngModel)]='covfld.Value'
                                     (blur)="covfld.OnChangeAction?onSchCtrlChange(covfld):''"
                                     [required]="covfld.IsMandatory"
                                     [pattern]='covfld.RegexValidation'
                                     [disabled]="!covfld.IsEnabled || viewMode" />
                              <div class='vm-validation-wrap'
                                   *ngIf="vs.IsCtrlInvalid(default)">
                                <span class="vm-validation vm-top-arrow mt-2 p-2">
                                  {{vs.GetErrorMessage(default, {}, covfld.DisplayName)}}
                                </span>
                              </div>
                            </div>
                          </ng-container>
                        </ng-container>
                        <div kendoTooltip position="right" class="vm-help-icon" title="{{covfld.HelpText}}"
                             *ngIf="covfld.HelpText !='' && covfld.HelpText != null ">
                        </div>
                      </div>
                    </div>
                  </ng-container>
                </div>
              </ng-container>
            </div>
          </section>
          <!--Schedule Coverages End-->
        </section>
      </div>
    </section>
  </form>
  <div class="row p-5 bg-white clearfix">
    <div class="col-md-12">
      <a (click)="cancelScheduleItem(isSchContentVsble ? 'add' : 'edit')" class="mt-3 float-left">Cancel</a>
      <button *ngIf="isSchContentVsble" class="btn btn-primary float-right" value="Save Schedule"
              (click)='saveScheduleItem(schObj)'>
        Save Schedule
      </button>
      <button *ngIf="isEditSchContentVsble && !viewMode" class="btn btn-primary float-right" value="Update"
              (click)='updateScheduleItem(schObj)'>
        Update
      </button>
    </div>
  </div>
</div>

<!-- Add Schedule Item and edit schedule item End -->
